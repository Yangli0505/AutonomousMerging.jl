<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Merging Environment · AutonomousMerging.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>AutonomousMerging.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../cooperative_idm/">Cooperative IDM</a></li><li><a class="toctext" href="../generative_merging_mdp/">Generative Merging MDP</a></li><li><a class="toctext" href="../">About</a></li><li class="current"><a class="toctext" href>Merging Environment</a><ul class="internal"><li><a class="toctext" href="#Environment-1">Environment</a></li><li><a class="toctext" href="#Features-and-Helper-functions-1">Features and Helper functions</a></li></ul></li><li><a class="toctext" href="../merging_mdp/">Merging MDP</a></li><li><a class="toctext" href="../rendering/">Rendering</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Merging Environment</a></li></ul><a class="edit-page" href="https://github.com/sisl/AutonomousMerging.jl/blob/master/docs/src/merging_environment.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Merging Environment</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Merging-Environment-1" href="#Merging-Environment-1">Merging Environment</a></h1><h2><a class="nav-anchor" id="Environment-1" href="#Environment-1">Environment</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.MergingEnvironment" href="#AutonomousMerging.MergingEnvironment"><code>AutonomousMerging.MergingEnvironment</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">MergingEnvironment</code></pre><p>A road network with a main lane and a merging lane. The geometry can be modified by  passing the parameters as keyword arguments in the constructor</p><p><strong>Parameters</strong></p><ul><li><code>lane_width::Float64 = 3.0</code></li><li><code>main_lane_vmax::Float64 = 15.0</code></li><li><code>merge_lane_vmax::Float64 = 10.0</code></li><li><code>main_lane_length::Float64 = 100.0</code></li><li><code>main_lane_angle::Float64 = float(pi)/4</code></li><li><code>merge_lane_angle::Float64 = float(pi)/4</code></li><li><code>merge_lane_length::Float64 = 50.0</code></li><li><code>after_merge_length::Float64 = 50.0</code></li></ul><p><strong>Internals</strong></p><ul><li><code>roadway::Roadway{Float64}</code> contains all the road segment and lane information</li><li><code>merge_point::VecSE2{Float64}</code> coordinate of the merge point in cartesian frame (0.0, 0.0, 0.0) by default</li><li><code>merge_proj::RoadProjection{Int64, Float64}</code> projection of the merge point on the roadway </li><li><code>merge_index::RoadIndex</code></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/099e826241fca365a120df9bac9a9fede6e7bae4/base/#L0-L23">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.generate_merging_roadway" href="#AutonomousMerging.generate_merging_roadway"><code>AutonomousMerging.generate_merging_roadway</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">generate_merging_roadway(lane_width::Float64 = 3.0, main_lane_vmax::Float64 = 20.0, merge_lane_vmax::Float64 = 15.0, main_lane_length::Float64 = 20.0, merge_lane_length::Float64 = 20.0, after_merge_length::Float64 = 20.0, main_lane_angle::Float64 = float(pi)/4, merge_lane_angle::Float64 = float(pi)/4)</code></pre><p>Generate a <code>Roadway</code> object representing a merging scenario.  The merge point is defined at (0., 0.) by default.</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/environment.jl#L64-L69">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.main_lane" href="#AutonomousMerging.main_lane"><code>AutonomousMerging.main_lane</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">main_lane(env::MergingEnvironment)</code></pre><p>returns the main lane of the merging scenario</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/environment.jl#L108-L111">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.merge_lane" href="#AutonomousMerging.merge_lane"><code>AutonomousMerging.merge_lane</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">merge_lane(env::MergingEnvironment)</code></pre><p>returns the merging lane of the merging scenario</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/environment.jl#L114-L117">source</a></section><h2><a class="nav-anchor" id="Features-and-Helper-functions-1" href="#Features-and-Helper-functions-1">Features and Helper functions</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.get_front_neighbor" href="#AutonomousMerging.get_front_neighbor"><code>AutonomousMerging.get_front_neighbor</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">get_front_neighbor(env::MergingEnvironment, scene::Scene, egoid::Int64)</code></pre><p>returns the front neighbor of <code>egoid</code> in its lane. It returns an object of type <code>NeighborLongitudinalResult</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L4-L7">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.get_neighbors" href="#AutonomousMerging.get_neighbors"><code>AutonomousMerging.get_neighbors</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">get_neighbors(env::MergingEnvironment, scene::Scene, egoid::Int64)</code></pre><p>returns the following neighbors id and relative distance (if they exist)      - the front neighbor of vehicle <code>egoid</code>     - the vehicle right behind the merge point (if <code>egoid</code> is on the main lane)     - the front neighbor of the projection of <code>egoid</code> on the main lane      - the rear neighbor of the projection of <code>egoid</code> on the merge lane </p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L24-L31">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.dist_to_merge" href="#AutonomousMerging.dist_to_merge"><code>AutonomousMerging.dist_to_merge</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">dist_to_merge(env::MergingEnvironment, veh::Vehicle)</code></pre><p>returns the distance to the merge point.</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L59-L62">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.time_to_merge" href="#AutonomousMerging.time_to_merge"><code>AutonomousMerging.time_to_merge</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">time_to_merge(env::MergingEnvironment, veh::Vehicle, a::Float64 = 0.0)</code></pre><p>return the time to reach the merge point using constant acceleration prediction.  If the acceleration, <code>a</code> is not specified, it performs a constant velocity prediction.</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L74-L78">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.find_merge_vehicle" href="#AutonomousMerging.find_merge_vehicle"><code>AutonomousMerging.find_merge_vehicle</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">find_merge_vehicle(env::MergingEnvironment, scene::Scene)</code></pre><p>returns the id of the merging vehicle if there is a vehicle on the merge lane.</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L99-L102">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.constant_acceleration_prediction" href="#AutonomousMerging.constant_acceleration_prediction"><code>AutonomousMerging.constant_acceleration_prediction</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">constant_acceleration_prediction(env::MergingEnvironment, veh::Vehicle, acc::Float64, time::Float64, v_des::Float64)</code></pre><p>returns the state of vehicle <code>veh</code> after time <code>time</code> using a constant acceleration prediction. </p><p><strong>inputs</strong></p><ul><li><code>env::MergingEnvironment</code> the environment </li><li><code>veh::Vehicle</code> the initial state of the vehicle</li><li><code>acc::Float64</code> the current acceleration of the vehicle </li><li><code>time::Float64</code> the prediction horizon </li><li><code>v_des::Float64</code> the desired speed of the vehicle (assumes that the vehicle will not exceed that speed)</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L113-L123">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.distance_projection" href="#AutonomousMerging.distance_projection"><code>AutonomousMerging.distance_projection</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">distance_projection(env::MergingEnvironment, veh::Vehicle)</code></pre><p>Performs a projection of <code>veh</code> onto the main lane. It returns the longitudinal position of the projection of <code>veh</code> on the main lane.  The projection is computing by conserving the distance to the merge point.</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L145-L149">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.collision_time" href="#AutonomousMerging.collision_time"><code>AutonomousMerging.collision_time</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">collision_time(env::MergingEnvironment, veh::Vehicle, mergeveh::Vehicle, acc_merge::Float64, acc_min::Float64)</code></pre><p>compute the collision time between two vehicles assuming constant acceleration.</p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L159-L162">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="AutonomousMerging.braking_distance" href="#AutonomousMerging.braking_distance"><code>AutonomousMerging.braking_distance</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">braking_distance(v::Float64, t_coll::Float64, acc::Float64)</code></pre><p>computes the distance to reach a velocity of 0. at constant acceleration <code>acc</code> in time <code>t_coll</code> with initial velocity <code>v</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/sisl/AutonomousMerging.jl/blob/c3cc01028ee9f3e3504f2513a8d7445f793b7fa0/src/features.jl#L186-L189">source</a></section><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">About</span></a><a class="next" href="../merging_mdp/"><span class="direction">Next</span><span class="title">Merging MDP</span></a></footer></article></body></html>
